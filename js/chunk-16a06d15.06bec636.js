(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16a06d15"],{"2f59":function(e,t,c){"use strict";c("d3b7");var n=c("7a23"),o=c("0f3e"),r=document.createElement("div");r.setAttribute("class","message-container"),document.body.appendChild(r);var l=null;t["a"]=function(e){var t=e.type,c=e.text,a=new Promise((function(e){var a=Object(n["createVNode"])(o["default"],{type:t,text:c});Object(n["render"])(a,r),clearTimeout(l),l=setTimeout((function(){Object(n["render"])(null,r),e("success")}),3e3)}));return a}},"336c":function(e,t,c){},"43cb":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o={class:"myCollect"},r={class:"score-list"};function l(e,t,c,l,a,s){var i=Object(n["resolveComponent"])("Score");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",o,[Object(n["createElementVNode"])("ul",r,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(l.collectList,(function(e,t){return Object(n["openBlock"])(),Object(n["createElementBlock"])("li",{key:e.id},[Object(n["createVNode"])(i,{score:e.score,isCollect:!0,onCancelCollect:function(e){return l.cancelCollect(t)}},null,8,["score","onCancelCollect"])])})),128))])])}c("a434");var a=c("8b63"),s=c("b775"),i=c("2f59"),u=c("4328"),d=c.n(u),b={name:"myCollect",components:{Score:a["a"]},setup:function(){var e=Object(n["ref"])(null);s["a"].get("/collect/getCollectList").then((function(t){e.value=t})).catch((function(e){Object(i["a"])({type:"error",error:e.message})}));var t=function(t){s["a"].post("/collect/deleteCollectById",d.a.stringify({id:e.value[t].id})).then((function(){e.value.splice(t,1),Object(i["a"])({type:"success",text:"取消成功"})})).catch((function(e){Object(i["a"])({type:"error",text:e.message})}))};return{collectList:e,cancelCollect:t}}},f=(c("92c0"),c("6b0d")),p=c.n(f);const m=p()(b,[["render",l],["__scopeId","data-v-101d208a"]]);t["default"]=m},"8b27":function(e,t,c){},"8b63":function(e,t,c){"use strict";c("b0c0");var n=c("7a23"),o=function(e){return Object(n["pushScopeId"])("data-v-71fb95dc"),e=e(),Object(n["popScopeId"])(),e},r={class:"score-item"},l=["src"],a={class:"name ellipsis-2"},s={class:"desc"},i={class:"extra"},u=o((function(){return Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("i",{class:"iconfont icon-start"}),Object(n["createTextVNode"])(" 开始弹奏")],-1)})),d=o((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collect"},null,-1)})),b=Object(n["createTextVNode"])(" 收藏"),f=[d,b],p=o((function(){return Object(n["createElementVNode"])("i",{class:"iconfont icon-collect"},null,-1)})),m=Object(n["createTextVNode"])(" 取消收藏"),j=[p,m];function O(e,t,c,o,d,b){var p=Object(n["resolveComponent"])("RouterLink");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",r,[c.score.scoreImageList[0]?(Object(n["openBlock"])(),Object(n["createElementBlock"])("img",{key:0,src:c.score.scoreImageList[0].file.url,alt:""},null,8,l)):Object(n["createCommentVNode"])("",!0),Object(n["createElementVNode"])("p",a,Object(n["toDisplayString"])(c.score.name)+"-"+Object(n["toDisplayString"])(c.score.author),1),Object(n["createElementVNode"])("p",s,Object(n["toDisplayString"])(c.score.scoreType.type)+"-"+Object(n["toDisplayString"])(c.score.user.nickname),1),Object(n["createElementVNode"])("div",i,[Object(n["createVNode"])(p,{to:"/piano/"+c.score.id},{default:Object(n["withCtx"])((function(){return[u]})),_:1},8,["to"]),c.isCollect?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:1,class:"collect",onClick:t[1]||(t[1]=function(){return o.cancelClick&&o.cancelClick.apply(o,arguments)})},j)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",{key:0,class:"collect",onClick:t[0]||(t[0]=function(){return o.collectClick&&o.collectClick.apply(o,arguments)})},f))])])}var k=c("2f59"),v={name:"Score",props:{score:{type:Object,default:function(){}},isCollect:{type:Boolean,default:!1}},setup:function(e,t){var c=t.emit,n=function(){e.isCollect||(e.score.id<0?Object(k["a"])({type:"error",text:"收藏失败，请稍后再试。"}):c("collect"))},o=function(){0!=e.isCollect&&(e.score.id<0?Object(k["a"])({type:"error",text:"取消失败，请稍后再试。"}):c("cancelCollect"))};return{collectClick:n,cancelClick:o}}},y=(c("8cfb"),c("6b0d")),C=c.n(y);const h=C()(v,[["render",O],["__scopeId","data-v-71fb95dc"]]);t["a"]=h},"8cfb":function(e,t,c){"use strict";c("336c")},"92c0":function(e,t,c){"use strict";c("8b27")},a434:function(e,t,c){"use strict";var n=c("23e7"),o=c("da84"),r=c("23cb"),l=c("5926"),a=c("07fa"),s=c("7b0b"),i=c("65f0"),u=c("8418"),d=c("1dde"),b=d("splice"),f=o.TypeError,p=Math.max,m=Math.min,j=9007199254740991,O="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!b},{splice:function(e,t){var c,n,o,d,b,k,v=s(this),y=a(v),C=r(e,y),h=arguments.length;if(0===h?c=n=0:1===h?(c=0,n=y-C):(c=h-2,n=m(p(l(t),0),y-C)),y+c-n>j)throw f(O);for(o=i(v,n),d=0;d<n;d++)b=C+d,b in v&&u(o,d,v[b]);if(o.length=n,c<n){for(d=C;d<y-n;d++)b=d+n,k=d+c,b in v?v[k]=v[b]:delete v[k];for(d=y;d>y-n+c;d--)delete v[d-1]}else if(c>n)for(d=y-n;d>C;d--)b=d+n-1,k=d+c-1,b in v?v[k]=v[b]:delete v[k];for(d=0;d<c;d++)v[d+C]=arguments[d+2];return v.length=y-n+c,o}})},b775:function(e,t,c){"use strict";c("d3b7");var n=c("bc3a"),o=c.n(n),r=c("a18c"),l="https://lhcyh-5511-4-1307606712.sh.run.tcloudbase.com/piano",a=o.a.create({baseURL:l});a.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("user"));return t&&t.token&&(e.headers.Jerry=t.token),e}),(function(e){return Promise.reject(e)})),a.interceptors.response.use((function(e){if(200==e.data.code)return e.data.data;if(600==e.data.code){localStorage.setItem("user",null),console.log("setItem");var t=encodeURIComponent(r["a"].currentRoute.value.fullPath);return r["a"].push("/login?redirectUrl="+t),e}return Promise.reject(e.data)}),(function(e){return Promise.reject(e)})),t["a"]=a}}]);
//# sourceMappingURL=chunk-16a06d15.06bec636.js.map