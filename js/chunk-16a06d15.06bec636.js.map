{"version":3,"sources":["webpack:///./src/components/library/Message.js","webpack:///./src/views/personal/views/myCollect/index.vue","webpack:///./src/views/personal/views/myCollect/index.vue?d51a","webpack:///./src/views/home/components/score.vue","webpack:///./src/views/home/components/score.vue?e255","webpack:///./src/views/home/components/score.vue?d262","webpack:///./src/views/personal/views/myCollect/index.vue?898e","webpack:///./node_modules/core-js/modules/es.array.splice.js","webpack:///./src/utils/request.js"],"names":["div","document","createElement","setAttribute","body","appendChild","timer","type","text","p","Promise","resolve","vnode","createVNode","Message","render","clearTimeout","setTimeout","class","_createElementBlock","_createElementVNode","_Fragment","_renderList","$setup","item","index","key","id","_createVNode","_component_Score","score","isCollect","onCancelCollect","name","components","Score","setup","collectList","ref","axios","get","then","res","value","catch","err","error","message","cancelCollect","post","qs","stringify","splice","__exports__","_hoisted_7","_hoisted_10","$props","scoreImageList","src","file","url","alt","_toDisplayString","author","scoreType","user","nickname","_component_RouterLink","to","_hoisted_6","onClick","props","Object","default","Boolean","emit","collectClick","cancelClick","$","global","toAbsoluteIndex","toIntegerOrInfinity","lengthOfArrayLike","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","TypeError","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","from","O","this","len","actualStart","argumentsLength","arguments","length","baseURL","process","instance","create","interceptors","request","use","config","JSON","parse","localStorage","getItem","token","headers","Jerry","reject","response","data","code","setItem","console","log","fullPath","encodeURIComponent","router","currentRoute","push"],"mappings":"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","file":"js/chunk-16a06d15.06bec636.js","sourcesContent":["// 实现使用函数调用xtx-message组件的逻辑\r\nimport { createVNode, render } from 'vue'\r\nimport Message from './message.vue'\r\n\r\n// 准备dom容器\r\nconst div = document.createElement('div')\r\ndiv.setAttribute('class', 'message-container')\r\ndocument.body.appendChild(div)\r\n// 定时器标识\r\nlet timer = null\r\n\r\nexport default ({ type, text }) => {\r\n  let p=new Promise((resolve)=>{\r\n    // 实现：根据xtx-message.vue渲染消息提示\r\n    // 1. 导入组件\r\n    // 2. 根据组件创建虚拟节点\r\n    const vnode = createVNode(Message, { type, text })\r\n    // 3. 准备一个DOM容器\r\n    // 4. 把虚拟节点渲染DOM容器中\r\n    render(vnode, div)\r\n    // 5. 开启定时，移出DOM容器内容\r\n    clearTimeout(timer)\r\n    timer = setTimeout(() => {\r\n      render(null, div)\r\n      resolve(\"success\");\r\n    }, 3000)\r\n  })\r\n  return p;\r\n}","<template>\r\n    <div class='myCollect'>\r\n       <ul class=\"score-list\">\r\n        <li v-for=\"(item,index) of collectList\" :key=\"item.id\">\r\n            <Score :score=\"item.score\" :isCollect=\"true\" @cancelCollect=\"cancelCollect(index)\"/>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n//import {useStore} from 'vuex'\r\nimport {ref} from 'vue'\r\nimport Score from '../../../home/components/score.vue'\r\nimport axios from \"../../../../utils/request\";\r\nimport Message from '../../../../components/library/Message';\r\nimport qs from \"qs\";\r\nexport default {\r\n  name: 'myCollect',\r\n  components:{\r\n    Score\r\n  },\r\n  setup(){\r\n    //const store=useStore();\r\n    const collectList=ref(null);\r\n    //scores.value=store.state.collect.collects;\r\n    //store.dispatch('collect/updateCollects');\r\n    //let user=JSON.parse(localStorage.getItem(\"user\"));\r\n    axios.get(\"/collect/getCollectList\").then((res)=>{\r\n      collectList.value=res;\r\n    }).catch((err)=>{\r\n      Message({type:\"error\",error:err.message});\r\n    })\r\n\r\n    const cancelCollect=(index)=>{\r\n      axios.post(\"/collect/deleteCollectById\",qs.stringify({id:collectList.value[index].id})).then(()=>{\r\n        collectList.value.splice(index,1);\r\n        Message({type:\"success\",text:\"取消成功\"});\r\n      }).catch((err)=>{\r\n        Message({type:\"error\",text:err.message});\r\n      })\r\n    }\r\n   \r\n    // watch(()=>{return store.state.collect.collects},(newVal)=>{\r\n    //   scores.value=newVal;\r\n    //   console.log(\"sc\");\r\n    //   console.log(scores.value);\r\n    // },{immediate:true})\r\n    return {collectList,cancelCollect};\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.score-list {\r\n    margin: auto;\r\n    width: 950px;\r\n    //border: solid;\r\n    //width: 990px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    //justify-content: space-around;\r\n    li {\r\n        width: 240px;\r\n        //height: 350px;\r\n        margin-right: 40px;\r\n        margin-bottom: 10px;\r\n        &:nth-last-child(-n+4) {\r\n            margin-bottom: 0;\r\n        }\r\n        &:nth-child(4n) {\r\n            margin-right: 0;\r\n        }\r\n    }\r\n}\r\n</style>","import { render } from \"./index.vue?vue&type=template&id=101d208a&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=101d208a&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\cyh\\\\software\\\\data\\\\vscode\\\\vueData\\\\myvue\\\\piano\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-101d208a\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"score-item\">\r\n     <img v-if=\"score.scoreImageList[0]\" :src=\"score.scoreImageList[0].file.url\" alt=\"\" />\r\n     <p class=\"name ellipsis-2\">{{score.name}}-{{score.author}}</p>\r\n     <p class=\"desc\">{{score.scoreType.type}}-{{score.user.nickname}}</p>\r\n     <!-- <p class=\"price\">&yen;{{goods.price}}</p> -->\r\n    <div class=\"extra\">\r\n      <RouterLink :to=\"'/piano/'+score.id\"><span><i class=\"iconfont icon-start\"></i>&nbsp;开始弹奏</span></RouterLink>\r\n      <span v-if=\"!isCollect\" class=\"collect\" @click=\"collectClick\"><i class=\"iconfont icon-collect\"></i>&nbsp;收藏</span>\r\n      <span v-else class=\"collect\" @click=\"cancelClick\"><i class=\"iconfont icon-collect\"></i>&nbsp;取消收藏</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n//import {useStore} from 'vuex'\r\n//import {ref} from 'vue'\r\n//import {useRouter} from 'vue-router'\r\n//import {addCollect,deleteCollect} from '../../../api/collect'\r\nimport Message from '../../../components/library/Message'\r\nexport default {\r\n  name: 'Score',\r\n  props: {\r\n    score: {\r\n      type: Object,\r\n      default: () => {}\r\n    },\r\n    isCollect:{\r\n      type:Boolean,\r\n      default:false\r\n    }\r\n  },\r\n  setup(props,{emit}){\r\n    // const isCollect=ref(false);\r\n    //const store=useStore();\r\n    //const router=useRouter();\r\n\r\n    const collectClick=()=>{\r\n      if(props.isCollect){\r\n        return;\r\n      }\r\n      // console.log(store.state.user.loginUser);\r\n      if(props.score.id<0){\r\n        Message({type:\"error\",text:\"收藏失败，请稍后再试。\"})\r\n        return;\r\n      }\r\n      emit(\"collect\");\r\n      // let collect={userId:,scoreId:props.score.id};\r\n      // addCollect(collect).then((res)=>{\r\n      //   if(res.data=='success'){\r\n      //     Message({type:'success',text:'收藏成功'});\r\n      //     isCollect.value=true;\r\n      //   }\r\n      // }).catch(()=>{\r\n      //   Message({type:'error',text:'收藏失败'});\r\n      // })\r\n    }\r\n\r\n    const cancelClick=()=>{\r\n      if(props.isCollect==false){\r\n        return;\r\n      }\r\n      if(props.score.id<0){\r\n        Message({type:\"error\",text:\"取消失败，请稍后再试。\"})\r\n        return;\r\n      }\r\n      emit(\"cancelCollect\");\r\n      // let collect={userId:store.state.user.loginUser.id,scoreId:props.score.id};\r\n      // deleteCollect(collect).then((res)=>{\r\n      //   if(res.data=='success'){\r\n      //     Message({type:'success',text:'已取消收藏'});\r\n      //     isCollect.value=false;\r\n      //   }\r\n      // }).catch(()=>{\r\n      //   Message({type:'error',text:'取消失败'});\r\n      // })\r\n    }\r\n\r\n    // const judgeIsCollect=()=>{\r\n    //   for(let collect of store.state.collect.collects){\r\n    //     if(collect.score.id==props.score.id){\r\n    //       return true;\r\n    //     }\r\n    //   }\r\n    //   return false;\r\n    // }\r\n    // watch(()=>{return store.state.collect.collects},()=>{\r\n    //   isCollect.value=judgeIsCollect();\r\n    // },{immediate:true})\r\n    return {collectClick,cancelClick};\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n//@import \"../../../assets/styles/variables.less\";\r\n.score-item {\r\n  //border: solid;\r\n  width: 240px;\r\n  height: 330px;\r\n  padding: 5px 20px;\r\n  position: relative;\r\n  overflow: hidden;\r\n  border: 0.5px solid;\r\n  transition: all .5s;\r\n  img{\r\n    width: 100%;\r\n    height: 250px;\r\n  }\r\n  // .image {\r\n  //   display: block;\r\n  //   width: 160px;\r\n  //   height: 160px;\r\n  //   margin: 0 auto;\r\n  //   img {\r\n  //     width: 100%;\r\n  //     height: 100%;\r\n  //   }\r\n  // }\r\n  p {\r\n    margin-top: 6px;\r\n    font-size: 16px;\r\n    &.name {\r\n      height: 25px;\r\n      //border: solid;\r\n      text-align: center;\r\n    }\r\n    &.desc {\r\n      color: black;\r\n      height: 20px;\r\n      text-align: center;\r\n      //border: solid;\r\n    }\r\n  }\r\n  .extra {\r\n    position: absolute;\r\n    left: 0;\r\n    bottom: 0;\r\n    height: 86px;\r\n    width: 100%;\r\n    background: black;\r\n    text-align: center;\r\n    transform: translate3d(0,100%,0);\r\n    transition: all .5s;\r\n    span {\r\n      display: block;\r\n      color: #fff;\r\n      width: 120px;\r\n      margin: 0 auto;\r\n      line-height: 30px;\r\n      &:first-child {\r\n        font-size: 18px;\r\n        border-bottom:1px solid #fff;\r\n        line-height: 40px;\r\n        margin-top: 5px;\r\n      }\r\n    }\r\n  }\r\n  &:hover {\r\n    border: solid 1px;\r\n    border-color: black;\r\n    .hoverShadow();\r\n    .extra {\r\n      transform: none;\r\n    }\r\n  }\r\n  .collect{\r\n    &:hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n}\r\n</style>","import { render } from \"./score.vue?vue&type=template&id=71fb95dc&scoped=true\"\nimport script from \"./score.vue?vue&type=script&lang=js\"\nexport * from \"./score.vue?vue&type=script&lang=js\"\n\nimport \"./score.vue?vue&type=style&index=0&id=71fb95dc&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\cyh\\\\software\\\\data\\\\vscode\\\\vueData\\\\myvue\\\\piano\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71fb95dc\"]])\n\nexport default __exports__","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./score.vue?vue&type=style&index=0&id=71fb95dc&scoped=true&lang=less\"","export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=101d208a&scoped=true&lang=less\"","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar TypeError = global.TypeError;\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toIntegerOrInfinity(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","// 1. 创建一个新的axios实例\r\n// 2. 请求拦截器，如果有token进行头部携带\r\n// 3. 响应拦截器：1. 剥离无效数据  2. 处理token失效\r\n// 4. 导出一个函数，调用当前的axsio实例发请求，返回值promise\r\n\r\nimport axios from 'axios'\r\nimport router from '@/router'\r\n// 导出基准地址，原因：其他地方不是通过axios发请求的地方用上基准地址\r\nexport const baseURL = process.env.VUE_APP_Server\r\nconst instance = axios.create({\r\n  // axios 的一些配置，baseURL  timeout\r\n  baseURL,\r\n  // timeout: 5000\r\n})\r\n\r\ninstance.interceptors.request.use(config => {\r\n  //console.log(\"baseURL:\"+baseURL);\r\n  //console.log(process.env.NODE_ENV);\r\n  // // 拦截业务逻辑\r\n  // // 进行请求配置的修改\r\n  // // 如果本地有token就在头部携带\r\n  // // 1. 获取用户信息对象\r\n  // const { profile } = store.state.user\r\n  // // 2. 判断是否有token\r\n  let user=JSON.parse(localStorage.getItem(\"user\"));\r\n  if (user&&user.token) {\r\n    // 3. 设置token\r\n    config.headers.Jerry = user.token;\r\n  }\r\n  return config\r\n}, err => {\r\n  return Promise.reject(err)\r\n})\r\n\r\n// res => res.data  取出data数据，将来调用接口的时候直接拿到的就是后台的数据\r\ninstance.interceptors.response.use(res => {\r\n  if(res.data.code==200){\r\n    return res.data.data;\r\n  }else if(res.data.code==600){\r\n    // 当前路由地址\r\n    // 组件里头：`/user?a=10` $route.path === /user  $route.fullPath === /user?a=10\r\n    // js模块中：router.currentRoute.value.fullPath 就是当前路由地址，router.currentRoute 是ref响应式数据\r\n    localStorage.setItem(\"user\",null);\r\n    console.log(\"setItem\");\r\n    const fullPath = encodeURIComponent(router.currentRoute.value.fullPath);\r\n    // encodeURIComponent 转换uri编码，防止解析地址出问题\r\n    router.push('/login?redirectUrl=' + fullPath);\r\n    return res;\r\n  }else{\r\n    return Promise.reject(res.data);\r\n  }\r\n  \r\n}, err => {\r\n  // // 401 状态码，进入该函数\r\n  // if (err.response && err.response.status === 401) {\r\n  //   // 1. 清空无效用户信息\r\n  //   // 2. 跳转到登录页\r\n  //   // 3. 跳转需要传参（当前路由地址）给登录页码\r\n  //   store.commit('user/setUser', {})\r\n  //   // 当前路由地址\r\n  //   // 组件里头：`/user?a=10` $route.path === /user  $route.fullPath === /user?a=10\r\n  //   // js模块中：router.currentRoute.value.fullPath 就是当前路由地址，router.currentRoute 是ref响应式数据\r\n  //   const fullPath = encodeURIComponent(router.currentRoute.value.fullPath)\r\n  //   // encodeURIComponent 转换uri编码，防止解析地址出问题\r\n  //   router.push('/login?redirectUrl=' + fullPath)\r\n  // }\r\n  return Promise.reject(err)\r\n})\r\n\r\n// instance.post=function(url,data){\r\n//   let request={\r\n//     url:url,\r\n//     data:data,\r\n//     method:\"post\"\r\n//   }\r\n//   return instance(request);\r\n// }\r\n\r\n// instance.get=function(url,params){\r\n//   console.log(params);\r\n//   let request={\r\n//     url:url,\r\n//     params:params,\r\n//     method:\"get\"\r\n//   }\r\n//   return instance(request);\r\n// }\r\n\r\n// 请求工具函数\r\nexport default instance;"],"sourceRoot":""}